# Escape From Dungeon
- 音素材はすべて魔王魂さん( https://maou.audio )からお借りしています。

## <ゲーム説明>
- ダンジョン内を移動し、アイテムを拾ったり使ったりしながら敵を倒しゴールにたどり着いたらクリアです。
- 紫色の場所は通るとダメージを受けますが毒にはなりません。
- HPが０になるか、Limitが０になるとゲームオーバーです。HPは拾ったポーションで回復できます。
- 基本的に行き止まりには、回復イベント・アイテム・もしくは罠があります。
- 毒になる罠があり、毒状態では移動やバトルのターン中にダメージを受けます。毒消し草で解除できます。
- 毒状態は、自動では回復しません。バトル中は毒消しを持っていると自動で使います。
- 移動中はどんどん視界が狭まっていくので、拾った松明で明るくしましょう。
- 基本的に敵がドア替わりなので、敵シンボルに向かって移動すればいいでしょう。
- 途中で敵の弱点になる武器を拾えば、攻撃力がアップして楽になります。

## <操作法>
- マウスで各ボタンをクリックすることでも操作できますが、キーでの操作の方がおすすめです。

## <移動時>
- 上下左右キー：移動
- [P]キー：HP回復(ポーションの所持数があれば)
- [O]キー:毒状態回復(毒消し草の所持数があれば)
- [I]キー:明かりの範囲を広げる(松明の所持数があれば)

## <バトル中>
- 上：攻撃　敵の弱点武器を入手していた場合、攻撃力が3倍になります。
- 左：防御　防御は完全無敵ですが、バトル中でもLimitは減っていきます。
- 右：HP回復　ポーションの所持数があれば回復できます。
- 下：逃げる いつでも１００％逃げることができますが、敵をスルーは出来ません。

---
## このプログラムの制作について
- 制作期間は 8/26 ～ 9/4 の1週間ほど、さらに1週間ほど自分の中で切りの良いところまで続けました。
- 敵モンスター・アイテム・イベント・マップのデータは、Event.csv から読み込み処理する仕様です。
- アイテムの説明については表示する予定でしたが、今回未実装。

---

## マップの仕様
- マップは map.csv から2次元配列にデータを格納、セルの文字列により分岐処理。
- セルのIDにより、マップパーツの表示の変更とイベントの処理。

| ID | 説明 | 表示パーツ | 表示以外の処理 |
|----|------|-----|----|
| 00 | 通路 | 床 | 通行可 |
| 11 | 普通の壁 | 壁 | 通行不可 |
| 12 | すり抜け壁 | 壁 | 通行可、すり抜けはプレイヤー表示を消すことで表現 |
| XX | ダメージ床 | ダメージ床 | 通行可、プレイヤーダメージ処理 |
| SS | スタート地点 | 床 | 通行可、プレイヤーの初期位置を変更 |

- プレイヤー移動時に移動先地点の座標をチェックし、ID値 によってイベント分岐処理。
- IDの1文字目がイベントの種類、2文字目によりメッセージ・ヒントの内容や敵の種類を変更。
- イベントはマップとは別の２次元配列にIDを格納し、ヒント表示以外のイベントは処理後に値を null にしイベントを削除。
- イベントは通路でしか起きない仕様なので表示パーツは床で固定。

| ID 1文字目 | ID 2文字目 | イベント内容 |
|----|---|------|
| M | 0～3 | メッセージを表示(一度表示したらイベント削除) |
| H | 0～9、A～K | ヒントを表示(何度でも表示) |
| I | 0～8 | アイテムを入手(一度きり) |
| E | 1～9 | 敵とのバトル(逃げることが可能、倒すまでは削除されない) |
| T | 0～3 | トラップイベント(一度きり) |
| L | 0～3 | 回復イベント(一度きり) |
| G | G | ゴール地点(ゲームクリア) |

<img width="600" height="945" alt="EFD_csv" src="https://github.com/user-attachments/assets/7330e05c-c9e4-4e01-9735-e38c44c139d3" />

<img width="913" height="767" alt="EFD_map1" src="https://github.com/user-attachments/assets/2846c482-e194-4e80-91b9-ce8c629ba9e1" />

- マップのCSVは LibreOffice を使用し、マクロでセルの色を変え視覚的にわかりやすくして編集を行いました。
<img width="551" height="667" alt="EFD_map1macro" src="https://github.com/user-attachments/assets/c6a38e6e-a4c6-4f0b-ab29-7aa4d4e26549" />
